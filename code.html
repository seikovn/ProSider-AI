<!DOCTYPE html>
<html class="dark" lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Quản lý AI Bot</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          "primary": "#2513ec",
          "background-light": "#f6f6f8",
          "background-dark": "#0b0a11",
          "surface-dark": "#0f1724",
          "border-dark": "#15151a",
          "text-secondary": "#9f9db9"
        },
        fontFamily: { "display": ["Inter", "sans-serif"] }
      }
    },
  }
</script>
<style>
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto; background: radial-gradient(800px 400px at 10% 10%, rgba(37,19,236,0.04), transparent), #08060b; color:#e6e6ee; margin:0}
  .container { max-width:1000px; margin:24px auto; padding:0 18px; }
  .panel { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.03); border-radius:12px; padding:18px; }
  .large-title{ font-size:32px; font-weight:700; margin-bottom:6px; }
  .muted{ color:#9f9db9; }
  .service-card{ border-radius:12px; padding:16px; background: rgba(255,255,255,0.015); border:1px solid rgba(255,255,255,0.02); margin-bottom:12px; display:block }
  .input-key{ width:100%; padding:10px 12px; border-radius:8px; background:#071025; border:1px solid rgba(255,255,255,0.02); color:#e6e6ee }
  .switch{ width:44px; height:26px; border-radius:999px; padding:3px; display:inline-flex; align-items:center; cursor:pointer; background:rgba(255,255,255,0.03) }
  .switch .dot{ width:18px; height:18px; border-radius:999px; background:#0f1724; transition: all .18s; }
  .switch.on{ background: linear-gradient(90deg,#5250ff,#2db0ff); }
  .switch.on .dot{ transform: translateX(18px); background:#fff; }
  .save-btn{ background:linear-gradient(180deg,#3d33ff,#1f9cff); color:#fff; padding:10px 16px; border-radius:10px; font-weight:600; }
  .row-4{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-top:12px; }
  .small{ font-size:13px; color:#cfcfe8; }
</style>
</head>
<body>
  <div class="container">
    <div class="panel">
      <div style="display:flex; align-items:center; justify-content:space-between">
        <div>
          <div class="large-title">Tùy chọn Công cụ AI</div>
          <div class="muted">Quản lý các kết nối AI của bạn để dịch, tóm tắt, giải thích nội dung, OCR và chat PDF.</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="save-btn" id="saveAll">Lưu thay đổi</button>
        </div>
      </div>

      <hr style="border:none;height:1px;background:rgba(255,255,255,0.02);margin:16px 0">

      <div>
        <h3 style="margin:0 0 12px 0">Nhà cung cấp dịch vụ</h3>

        <!-- Google Gemini -->
        <div class="service-card" id="svc-gemini">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-weight:700">Google Gemini</div>
              <div class="muted small">Mô hình đa phương thức mạnh mẽ</div>
            </div>
            <div>
              <div class="switch on" data-id="google"><div class="dot"></div></div>
            </div>
          </div>
          <div style="margin-top:10px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <label class="small">Gemini API Key</label>
              <a class="small" href="#" target="_blank" style="color:#7aa2ff">Lấy khóa API</a>
            </div>
            <input class="input-key" type="password" id="key-google" placeholder="Nhập khóa API (sk-...)" value="">
          </div>
        </div>

        <!-- Deepseek -->
        <div class="service-card" id="svc-deepseek">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-weight:700">Deepseek AI</div>
              <div class="muted small">Chuyên gia về code và logic</div>
            </div>
            <div>
              <div class="switch" data-id="deepseek"><div class="dot"></div></div>
            </div>
          </div>
          <div style="margin-top:10px">
            <label class="small">Deepseek API Key</label>
            <input class="input-key" type="text" id="key-deepseek" placeholder="Nhập khóa API (sk-...)">
          </div>
        </div>

        <!-- Anthropic -->
        <div class="service-card" id="svc-anthropic">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-weight:700">Anthropic Claude</div>
              <div class="muted small">Xử lý văn bản dài và sắc thái tốt</div>
            </div>
            <div>
              <div class="switch on" data-id="anthropic"><div class="dot"></div></div>
            </div>
          </div>
          <div style="margin-top:10px">
            <label class="small">Claude API Key</label>
            <input class="input-key" type="password" id="key-anthropic" placeholder="Nhập khóa API (sk-...)" value="">
          </div>
        </div>

        <!-- General settings -->
        <div class="service-card" style="margin-top:12px">
          <h4 style="margin:0 0 8px 0">Cài đặt chung</h4>
          <div class="row-4">
            <div>
              <label class="small">Công cụ dịch mặc định</label>
              <select class="input-key" id="default-tool">
                <option>Google Gemini</option>
                <option>ChatGPT (OpenAI)</option>
                <option>Anthropic Claude</option>
              </select>
            </div>
            <div>
              <label class="small">Ngôn ngữ đầu ra</label>
              <select class="input-key" id="default-lang">
                <option>Tiếng Việt (Vietnamese)</option>
                <option>English</option>
              </select>
            </div>
            <div>
              <label class="small">Ngôn ngữ nhận dạng OCR</label>
              <select class="input-key" id="ocr-lang">
                <option>Tự động phát hiện</option>
                <option>Tiếng Việt</option>
                <option>Tiếng Anh</option>
              </select>
            </div>
            <div>
              <label class="small">Chế độ phân tích PDF</label>
              <select class="input-key" id="pdf-mode">
                <option>Tóm tắt nhanh</option>
                <option>Tóm tắt chi tiết</option>
              </select>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

<script>
  // Simple storage helpers using chrome.storage (works in extension options)
  async function loadSettings() {
    const data = await chrome.storage.local.get(['apiKeys','settings']);
    const keys = data.apiKeys || {};
    document.getElementById('key-google').value = keys.google || '';
    document.getElementById('key-deepseek').value = keys.deepseek || '';
    document.getElementById('key-anthropic').value = keys.anthropic || '';
    const s = data.settings || {};
    document.getElementById('default-tool').value = s.defaultTool || 'Google Gemini';
    document.getElementById('default-lang').value = s.defaultLang || 'Tiếng Việt (Vietnamese)';
    document.getElementById('ocr-lang').value = s.ocrLang || 'Tự động phát hiện';
    document.getElementById('pdf-mode').value = s.pdfMode || 'Tóm tắt nhanh';
  }

  async function saveSettings() {
    const keys = {
      google: document.getElementById('key-google').value.trim(),
      deepseek: document.getElementById('key-deepseek').value.trim(),
      anthropic: document.getElementById('key-anthropic').value.trim()
    };
    const settings = {
      defaultTool: document.getElementById('default-tool').value,
      defaultLang: document.getElementById('default-lang').value,
      ocrLang: document.getElementById('ocr-lang').value,
      pdfMode: document.getElementById('pdf-mode').value
    };
    await chrome.storage.local.set({ apiKeys: keys, settings });
    alert('Đã lưu cài đặt');
  }

  document.getElementById('saveAll').addEventListener('click', saveSettings);

  // toggle switches appearance (simple, no persistence)
  document.querySelectorAll('.switch').forEach(s=>{
    s.addEventListener('click', ()=>{
      s.classList.toggle('on');
    });
  });

  // load initial
  loadSettings();
</script>
</body>
</html>
